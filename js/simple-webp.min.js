
(function(window){var html=document.documentElement,isSupported=null;function domReady(fn){if(document.readyState!=='loading')fn();else document.addEventListener('DOMContentLoaded',fn);}
function each(action){action=action||function(){};var elements=document.querySelectorAll('*[data-webp]');console.log(elements)
if(elements.length===0)return;for(var i=0;i<elements.length;i++){var el=elements[i];action(el);}}
function checkSupport(fn){fn(!!window.chrome)}
function addDefault(){each(function(el){el.insertAdjacentHTML('afterend',el.textContent);el.parentNode.removeChild(el);});}
function addWebP(support){console.log('here1',support?'.webp':'.jpg')
each(function(el){console.log(el)
switch(el.tagName.toLowerCase()){case'noscript':var str=el.textContent;var p1=str.indexOf(' src=');var p2=str.indexOf(' ',p1+1);var p3=str.indexOf('>',p1+1);var pLast=(p2>p3)?p3:p2;var src=str.slice(p1,pLast);var pLastDot=src.lastIndexOf('.');var extension=src.slice(pLastDot);var newExtension=extension.replace(/\.[a-zA-Z]{3,5}/g,support?'.webp':'.jpg');var newStr=str.slice(0,p1+pLastDot)+newExtension+str.slice(pLast);el.insertAdjacentHTML('afterend',newStr);el.parentNode.removeChild(el);break
default:var str=el.style.backgroundImage;var p1=str.indexOf('url("')+5;var p2=str.indexOf('")',p1+1);var src=str.slice(p1,p2);src=src.replace(/\.[a-zA-Z]{3,5}/g,support?'.webp':'.jpg');console.log('here',support?'.webp':'.jpg',src)
el.style.backgroundImage='url("'+src+'")'
break}});}
function interV(support){console.log('lala')
addWebP(support);}
function webpSupportFnCallback(support){var timer;interV(support);timer=setInterval(interV.bind(null,support),15);domReady(function(){clearInterval(timer);});return'done';}
checkSupport(webpSupportFnCallback);window.simpleWebp=webpSupportFnCallback.bind(null,isSupported);})(window);